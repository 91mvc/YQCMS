@model YQCMS.Models.ArticleModel
@{YQCMS.General.GeneralConfigInfo ci = @ViewBag.CI as YQCMS.General.GeneralConfigInfo;}
@section MenuInfo{
<ul> 
    <li><a href="@(ci.WebPath)admin/Index">- 管理首页 -</a></li>
    <li class="selected">
        <span class="selected-arrow">&nbsp;</span><!-- place this span inside the selected list element like on this one -->
        <a href="###">- 内容管理 -</a>
        <ul>
        <li><a href="@(ci.WebPath)admin/adminarticle/?tid=1">文章</a></li>
        <li><a href="@(ci.WebPath)admin/adminarticle/?tid=2">单页</a></li>
        <li><a href="@(ci.WebPath)admin/adminarticle/?tid=5">帖子</a></li>
        <li class="v10"><a href="@(ci.WebPath)admin/adminarticle/?tid=4">相册</a></li>
        <li><a href="@(ci.WebPath)admin/adminarticle/?tid=6">留言</a></li>
        <li class="v10"><a href="@(ci.WebPath)admin/adminarticle/?layer=1">回复/回帖</a></li>
        <li><a href="@(ci.WebPath)admin/adminarticle/?tid=7">自定义区域</a></li>
        </ul>
    </li>
    <li><a href="@(ci.WebPath)admin/AdminBaseConfig">- 配置管理 -</a></li>
</ul>
}

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/kindeditor/kindeditor.js")" type="text/javascript"></script> 
<script src="@Url.Content("~/Scripts/kindeditor/lang/zh_CN.js")" type="text/javascript"></script> 


<div id="mainContent">
        <div id="leftBox">
          <div id="pagePath">
          当前位置：修改内容
          </div>
          <div id="forms" class="contentBox">
            <div class="contentBoxTop">
              <h3>修改内容</h3>
                <ul class="switcherTabs">
                    <li class="selected"><a tar="#box-1">-基础信息- </a></li>
                    <li class=""><a tar="#box-2">-SEO-</a></li>
                </ul>
            </div>
            <div class="innerContent">
@using (Html.BeginForm())
{
            <div id="box-1" class="tab1-box" style="display: block;">
    
            @Html.HiddenFor(m => m.ID)
            <div class="label">
               <div class="editor-label">
                    @Html.LabelFor(m => m.CateId)
                </div>
                <div class="editor-field">
                    @Html.DropDownList("CateId")
                </div>
            </div>
            <div class="label">
                <div class="editor-label">
                    @Html.LabelFor(m => m.Title)
                </div>
                <div class="editor-field">
                    @Html.TextBoxFor(m => m.Title, new { style = "width: 850px;" })
                    @Html.ValidationMessageFor(m => m.Title)
                </div>
            </div>
            <div class="label">
                <div class="editor-label">
                    @Html.LabelFor(m => m.Summary)
                    <span id="SummaryTxtCount">(300)</span>
                </div>
                <div class="editor-field clstxtarea">
                    @Html.TextAreaFor(model => model.Summary, new { style = "width: 850px; height: 50px" })
                    @Html.ValidationMessageFor(m => m.Summary)
                </div>
            </div>
            <div class="label">
                <div class="editor-label">
                    @Html.LabelFor(m => m.Content)
                </div>
                <div class="editor-field clstxtarea">
                    @Html.TextAreaFor(model => model.Content, new { style = "width: 850px; height: 260px" })
                    @Html.ValidationMessageFor(m => m.Content)
                </div>
            </div>
            <div class="label">
                <div class="editor-label">
                    @Html.LabelFor(m => m.Tags)
                </div>
                <div class="editor-field">
                    @Html.TextBoxFor(m => m.Tags, new { style = "width: 850px;" })
                    @Html.ValidationMessageFor(m => m.Tags)
                </div>
            </div>
            <div class="label">
                <div class="editor-label">
                    @Html.LabelFor(model => model.ReplyPermit)
                </div>
                <div class="editor-field radios">
                    <input type="radio" value="1" name="ReplyPermit" id="ReplyPermit_y" @if (Model.ReplyPermit == 1)
                                                                                        {@Html.Raw("checked=\"checked\"")}/>
                    <label for="ReplyPermit_y">
                        允许评论</label>
                    <input type="radio" value="2" name="ReplyPermit" id="ReplyPermit_n" @if (Model.ReplyPermit == 2)
                                                                                        {@Html.Raw("checked=\"checked\"")}/>
                    <label for="ReplyPermit_n">
                        不允许评论</label>
                </div>
            </div>
            <div class="label">
                <div class="editor-label">
                    @Html.LabelFor(model => model.Status)
                </div>
                <div class="editor-field radios">
                    <input type="radio" value="1" name="Status" id="Status_y"  @if (Model.Status == 1)
                                                                               {@Html.Raw("checked=\"checked\"")}/>
                    <label for="Status_y">
                        立即发布</label>
                    <input type="radio" value="2" name="Status" id="Status_n"  @if (Model.Status == 2)
                                                                               {@Html.Raw("checked=\"checked\"")}/>
                    <label for="Status_n">
                        保存草稿</label>
                </div>
            </div>
            <div class="label">
                <div class="editor-label">
                    @Html.LabelFor(model => model.IsCommend)
                </div>
                <div class="editor-field radios">
                    <input type="radio" value="1" name="IsCommend" id="IsCommend_y"  @if (Model.IsCommend == 1)
                                                                                     {@Html.Raw("checked=\"checked\"")}/>
                    <label for="IsCommend_y">
                        推荐</label>
                    <input type="radio" value="2" name="IsCommend" id="IsCommend_n"  @if (Model.IsCommend == 2)
                                                                                     {@Html.Raw("checked=\"checked\"")}/>
                    <label for="IsCommend_n">
                        不推荐</label>
                </div>
            </div>
            <div class="label">
                <div class="editor-label">
                    @Html.LabelFor(model => model.IsTop)
                </div>
                <div class="editor-field radios">
                    <input type="radio" value="1" name="IsTop" id="IsTop_y"  @if (Model.IsTop == 1)
                                                                             {@Html.Raw("checked=\"checked\"")}/>
                    <label for="IsTop_y">
                        置顶</label>
                    <input type="radio" value="2" name="IsTop" id="IsTop_n"  @if (Model.IsTop == 2)
                                                                             {@Html.Raw("checked=\"checked\"")}/>
                    <label for="IsTop_n">
                        不置顶</label>
                </div>
            </div>

            </div><!--end of #box-1-->
            <div style="display:none" id="box-2" class="tab1-box">

            <div class="label">
                <div class="editor-label">
                    @Html.LabelFor(m => m.SeoTitle)
                </div>
                <div class="editor-field clstxtarea">
                    @Html.TextAreaFor(model => model.SeoTitle, new { style = "width: 800px; height: 30px" })
                    @Html.ValidationMessageFor(m => m.SeoTitle)
                </div>
            </div>
            <div class="label">
                <div class="editor-label">
                    @Html.LabelFor(m => m.SeoDescription)
                </div>
                <div class="editor-field clstxtarea">
                    @Html.TextAreaFor(model => model.SeoDescription, new { style = "width: 800px; height: 50px" })
                    @Html.ValidationMessageFor(m => m.SeoDescription)
                </div>
            </div>
            <div class="label">
                <div class="editor-label">
                    @Html.LabelFor(m => m.Seokeywords)
                </div>
                <div class="editor-field clstxtarea">
                    @Html.TextAreaFor(model => model.Seokeywords, new { style = "width: 800px; height: 50px" })
                    @Html.ValidationMessageFor(m => m.Seokeywords)
                </div>
            </div>
            <div class="label">
                <div class="editor-label">
                    @Html.LabelFor(m => m.SeoMetas)
                </div>
                <div class="editor-field clstxtarea">
                    @Html.TextAreaFor(model => model.SeoMetas, new { style = "width: 800px; height: 80px" })
                    @Html.ValidationMessageFor(m => m.SeoMetas)
                </div>
            </div>
            <div class="label">
                <div class="editor-label">
                    @Html.LabelFor(m => m.ReName)
                </div>
                <div class="editor-field">
                    @Html.TextBoxFor(m => m.ReName, new { style = "width: 800px;" })
                    @Html.ValidationMessageFor(m => m.ReName)
                </div>
            </div>

            </div><!--end of #box-2-->
                <p>
			    <input type="image" src="/Content@(ci.WebPath)image/admin/bt_submit.gif" name="BtnSubmit">
                </p>
}
            </div>
          </div>
<hr>
          <div class="errorBox"><div class="errorBoxTop">&nbsp;</div>
              <div class="msgBoxContent errorIcon">
                <p>Error. Item update failed. </p>
                <p>Details for the error goes here (If you need to).</p>
              </div>
          </div>
          <div class="successBox">
          <div class="successBoxTop">&nbsp;</div>
              <div class="msgBoxContent successIcon">
              <p>Success! Item updated.</p>
              </div>
          </div>
          <hr>
      </div><!-- end of #leftBox -->
              
  </div><!-- end of #content -->


<script type="text/javascript">
    $(function () {
        var editorSummary = null;
        var editorContent = null;

        KindEditor.ready(function (K) {
            editorSummary = K.create('textarea[name="Summary"]',
            {
                allowImageUpload: true,
                uploadJson: '@(ci.WebPath)admin/UploadFile',
                afterCreate: function () {
                    $(this.edit.doc).keyup(function () { SummaryTxtKeyUp(); });
                },
                items: ['fontname', 'fontsize', '|', 'forecolor', 'hilitecolor', 'bold', 'italic', 'underline', '|', 'image', 'link']
            });

            editorContent = K.create('textarea[name="Content"]', {
                allowImageUpload: true,
                uploadJson: '@(ci.WebPath)admin/UploadFile'
                //                ,items: [
                //'fontname', 'fontsize', '|', 'forecolor', 'hilitecolor', 'bold', 'italic', 'underline',
                //'removeformat', '|', 'justifyleft', 'justifycenter', 'justifyright', 'insertorderedlist',
                //'insertunorderedlist', '|', 'emoticons', 'image', 'flash', 'media', 'insertfile', 'table', 'link']
            });
        });

        function SummaryTxtKeyUp() {
            editorSummary.sync();
            var summarytxt = $('#Summary').val();
            $("#SummaryTxtCount").html('(' + (300 - summarytxt.length) + ')');
        }

        $("#BtnSubmit").click(function () {
            editorSummary.html(ReplaceKESpace(editorSummary.html()));
            editorSummary.sync();
            editorContent.html(ReplaceKESpace(editorContent.html()));
            editorContent.sync();
        });


        $(".switcherTabs li").click(function () {
            var tar = $(this).find("a").attr("tar");
            $(this).addClass("selected").siblings("li").removeClass("selected");
            $(".tab1-box").hide();
            $(tar).show();
        });

    });
</script> 
